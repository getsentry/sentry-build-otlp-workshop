# =============================================================================
# OTEL E-COMMERCE API - ENVIRONMENT VARIABLES
# =============================================================================

# =============================================================================
# MODE 1: DIRECT (OTEL SDK → Sentry)
# =============================================================================
# Single service sending directly to a single Sentry project.
# This demonstrates standard OTEL SDK usage with Sentry.
#
# To run:
#   npm start  (or: npm run direct)
#
# Get these values from:
#   Sentry → Settings → Projects → [Your Project] → Client Keys (DSN)
#   Click on a DSN → scroll to "OTLP Configuration"
# =============================================================================

OTEL_SERVICE_NAME=sentry-build-otlp-workshop-api
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=https://YOUR-ORG-ID.ingest.us.sentry.io/api/YOUR-PROJECT-ID/integration/otlp/v1/traces
OTEL_EXPORTER_OTLP_TRACES_HEADERS=x-sentry-auth=sentry sentry_key=YOUR_PUBLIC_KEY

# Optional: Also send logs
OTEL_EXPORTER_OTLP_LOGS_ENDPOINT=https://YOUR-ORG-ID.ingest.us.sentry.io/api/YOUR-PROJECT-ID/integration/otlp/v1/logs
OTEL_EXPORTER_OTLP_LOGS_HEADERS=x-sentry-auth=sentry sentry_key=YOUR_PUBLIC_KEY

# =============================================================================
# MODE 2: COLLECTOR (Multi-Project Routing)
# =============================================================================
# Microservices architecture with routing to separate Sentry projects.
#
# Architecture:
#   Gateway (port 3000) + Products (port 3001) + Orders (port 3002)
#   → OTEL Collector routes by service.name to separate Sentry projects
#
# To run:
#   npm run collector:all  (starts all services with one command)
#
# Setup:
#   1. Create 2 Sentry projects (Products, Orders)
#   2. Get OTLP endpoints for each project (see below for instructions)
#   3. Fill in the variables below
#
# Get OTLP endpoints from Sentry:
#   Settings → Projects → [Your Project] → Client Keys (DSN) → OTLP Configuration
#
# See docs/MULTI_PROJECT_ROUTING.md for detailed explanation.
# =============================================================================

# Products Service → Products Sentry Project
SENTRY_PRODUCTS_TRACES_ENDPOINT=https://YOUR-ORG-ID.ingest.us.sentry.io/api/YOUR-PRODUCTS-PROJECT-ID/integration/otlp/v1/traces
SENTRY_PRODUCTS_LOGS_ENDPOINT=https://YOUR-ORG-ID.ingest.us.sentry.io/api/YOUR-PRODUCTS-PROJECT-ID/integration/otlp/v1/logs
SENTRY_PRODUCTS_AUTH=sentry sentry_key=YOUR_PRODUCTS_PUBLIC_KEY,sentry_version=7

# Orders Service → Orders Sentry Project
SENTRY_ORDERS_TRACES_ENDPOINT=https://YOUR-ORG-ID.ingest.us.sentry.io/api/YOUR-ORDERS-PROJECT-ID/integration/otlp/v1/traces
SENTRY_ORDERS_LOGS_ENDPOINT=https://YOUR-ORG-ID.ingest.us.sentry.io/api/YOUR-ORDERS-PROJECT-ID/integration/otlp/v1/logs
SENTRY_ORDERS_AUTH=sentry sentry_key=YOUR_ORDERS_PUBLIC_KEY,sentry_version=7

# Port configuration for collector mode services
PRODUCTS_PORT=3001
ORDERS_PORT=3002

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

NODE_ENV=development
PORT=3000

# =============================================================================
# DATABASE (PostgreSQL via Neon)
# =============================================================================
# Get from: https://console.neon.tech
# Or run: npx neondb -y (auto-creates database and adds URL to .env)
# =============================================================================

DATABASE_URL=postgresql://YOUR_USER:YOUR_PASSWORD@YOUR_HOST.neon.tech/neondb?sslmode=require
